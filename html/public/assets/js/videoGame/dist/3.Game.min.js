var regaloNavidad=regaloNavidad||{},saltando=!1,ableToSaltar1=!0,ableToSaltar2=!0,ableToSaltar3=!0,onGround=!1,touchEventDown=!1,touchEventUp=!0,HUDGame,enemy;regaloNavidad.Game=function(){},regaloNavidad.Game.prototype={preload:function(){this.game.time.advancedTiming=!0},create:function(){this.game.world.setBounds(0,0,8e3,this.game.height),this.baseBackground=this.game.add.sprite(0,0,"backgroundBase"),this.baseBackground.body=null,this.baseBackground.fixedToCamera=!0,this.bgWorld=this.game.add.tileSprite(0,0,4096,640,"backgroundTiles"),this.bgWorld2=this.game.add.tileSprite(4096,0,4096,640,"backgroundTiles"),this.bgWorld.body=null,this.bgWorld2.body=null,this.cursors=this.game.input.keyboard.createCursorKeys(),this.game.input.mouse.enabled=!0,this.spaceBar=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.game.input.touch.touchStartCallback=this.onTouchDown,this.game.input.touch.touchEndCallback=this.onTouchUp,this.swipe=this.game.input.activePointer,this.generateBuilds(),this.generateObjects(),this.player=this.game.add.sprite(100,400,"player"),this.player.animations.add("run"),HUDGame=this.game.add.group(),this.hud_top=this.game.add.sprite(0,0,"hud_top"),HUDGame.add(this.hud_top),this.hud_mitocondria=this.game.add.sprite(this.game.width-45,this.game.height-35,"hud_mitocondria"),this.hud_mitocondria.alpha=.6,HUDGame.add(this.hud_mitocondria),HUDGame.body=null,HUDGame.fixedToCamera=!0,this.ground=this.game.add.sprite(0,585),this.ground.scale.x=this.game.world.width,this.game.physics.enable([this.player,this.ground],Phaser.Physics.ARCADE),this.player.body.gravity.y=1200,this.ground.body.immovable=!0,this.ground.body.allowGravity=!1,this.player.animations.play("run",15,!0),this.ordenWorld(),this.game.input.addPointer(),this.game.input.addPointer(),this.game.input.addPointer(),this.game.input.addPointer()},update:function(){this.game.physics.arcade.collide(this.player,this.ground,this.playerOnGround,null,this),this.game.physics.arcade.collide(this.player,this.objects,this.playerHit,null,this),this.player.alive&&!this.stopped&&(!this.wrapping&&this.player.x<this.game.width?(this.wrapping=!0,this.wraps++,this.builds.destroy(),this.generateBuilds(),this.generateObjects(),this.ordenWorld()):this.player.x>=this.game.width&&(this.wrapping=!1),this.spaceBar.isDown&&ableToSaltar1&&this.playerJump(),this.swipe.isDown&&this.swipe.positionDown.y>this.swipe.position.y&&ableToSaltar2&&this.playerJump(),touchEventDown&&ableToSaltar3&&this.playerJump(),this.spaceBar.isUp&&!onGround&&(ableToSaltar1=!1),this.swipe.isUp&&!onGround&&(ableToSaltar2=!1),touchEventUp&&!onGround&&(ableToSaltar3=!1),this.player.body.velocity.x=500,this.game.world.wrap(this.player,-(this.game.width/2)-180,!1,!0,!1),this.game.camera.x=this.player.x-320)},generateObjects:function(){this.objects=this.game.add.group(),this.objects.enableBody=!0,enemy=this.objects.create(1500,300,"obj_01");this.game.rnd.integerInRange(1,7);enemy.body.immovable=!0,enemy.body.allowGravity=!1},generateBuilds:function(){this.builds=this.game.add.group(),this.builds.body=null;for(var t,a=this.game.rnd.integerInRange(1,7),i=1,e=1;i>=e;e++){var s=this.game.rnd.integerInRange(this.game.width+300,this.game.world.width-this.game.width-900);t=this.builds.create(s,0,"build_0"+a)}},onTouchDown:function(t){touchEventDown=!0,touchEventUp=!1},onTouchUp:function(t){touchEventDown=!1,touchEventUp=!0},playerJump:function(){this.player.body.y-=10,saltando||(this.player.loadTexture("player_jump",0),this.player.animations.add("jump"),this.player.animations.play("jump",15,!1)),saltando=!0,onGround=!1},ordenWorld:function(){this.game.world.bringToTop(this.baseBackground),this.game.world.bringToTop(this.bgWorld),this.game.world.bringToTop(this.bgWorld2),this.game.world.bringToTop(this.ground),this.game.world.bringToTop(this.builds),this.game.world.bringToTop(this.objects),this.game.world.bringToTop(this.player),this.game.world.bringToTop(HUDGame)},playerOnGround:function(){onGround||(this.player.loadTexture("player",0),this.player.animations.add("run"),this.player.animations.play("run",15,!0)),ableToSaltar1=!0,ableToSaltar2=!0,ableToSaltar3=!0,onGround=!0,saltando=!1},playerHit:function(){console.log("Auch")},render:function(){this.game.debug.inputInfo(32,38),this.game.debug.text(this.game.time.fps||"--",890,50,"#FFF","40px Courier"),this.game.debug.text("jump:"+saltando,32,20),this.game.debug.spriteBounds(this.player)}};